
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://mardix.github.com/mocha/ext/">
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.1">
    
    
      
        <title>Extensions - Mocha</title>
      
    
    
      <script src="../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-4d0d3f2fbf.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-f78e5cb881.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="brown" data-md-color-accent="amber">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://mardix.github.com/mocha" title="Mocha" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Extensions
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/mardix/mocha" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Mocha
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Mocha
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/mardix/mocha" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Mocha
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../config/" title="Config" class="md-nav__link">
      Config
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../views/" title="Views" class="md-nav__link">
      Views
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../views/decorators/" title="Views: Decorators" class="md-nav__link">
      Views: Decorators
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../views/helpers/" title="Views: Helpers" class="md-nav__link">
      Views: Helpers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../templates/filters/" title="Templates: Filters" class="md-nav__link">
      Templates: Filters
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Templates Components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Templates Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/forms/" title="Forms" class="md-nav__link">
      Forms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/widgets/" title="Widgets" class="md-nav__link">
      Widgets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/navs/" title="Navs" class="md-nav__link">
      Navs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../assets/" title="Assets" class="md-nav__link">
      Assets
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Extensions
      </label>
    
    <a href="./" title="Extensions" class="md-nav__link md-nav__link--active">
      Extensions
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#upload" title="upload" class="md-nav__link">
    upload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache" title="cache" class="md-nav__link">
    cache
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail" title="mail" class="md-nav__link">
    mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recaptcha" title="recaptcha" class="md-nav__link">
    recaptcha
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csrf" title="csrf" class="md-nav__link">
    csrf
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session" title="session" class="md-nav__link">
    session
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" title="storage" class="md-nav__link">
    storage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageget" title="storage.get" class="md-nav__link">
    storage.get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageupload" title="storage.upload" class="md-nav__link">
    storage.upload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../utils/" title="Utils" class="md-nav__link">
      Utils
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../pagination/" title="Pagination" class="md-nav__link">
      Pagination
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../signals/" title="Signals" class="md-nav__link">
      Signals
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/" title="Contrib" class="md-nav__link">
      Contrib
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/auth/" title="Auth" class="md-nav__link">
      Auth
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/admin/" title="Admin" class="md-nav__link">
      Admin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/contact-page/" title="Contact Page" class="md-nav__link">
      Contact Page
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/error-page/" title="Error Page" class="md-nav__link">
      Error Page
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contrib/maintenance-page/" title="Error Page" class="md-nav__link">
      Error Page
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deploy/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#upload" title="upload" class="md-nav__link">
    upload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache" title="cache" class="md-nav__link">
    cache
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail" title="mail" class="md-nav__link">
    mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recaptcha" title="recaptcha" class="md-nav__link">
    recaptcha
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csrf" title="csrf" class="md-nav__link">
    csrf
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session" title="session" class="md-nav__link">
    session
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" title="storage" class="md-nav__link">
    storage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageget" title="storage.get" class="md-nav__link">
    storage.get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageupload" title="storage.upload" class="md-nav__link">
    storage.upload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="extensions">Extensions</h1>
<p>Extensions are some flask extensions that are already loaded in your application 
for you to use. They can be configured through their native configuration or 
through Mocha config.</p>
<hr />
<h2 id="upload">upload</h2>
<hr />
<h2 id="cache">cache</h2>
<p><strong>cache</strong> exposes a caching mechanism for your application's views.</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">cache</span>
</pre></div>


<p><strong>Configuration</strong></p>
<div class="codehilite"><pre><span></span>#: Flask-Cache is used to caching

#: CACHE_TYPE
#: The type of cache to use
#: null, simple, redis, filesystem,
CACHE_TYPE = &quot;simple&quot;

#: CACHE_REDIS_URL
#: If CHACHE_TYPE is &#39;redis&#39;, set the redis uri
#: redis://username:password@host:port/db
CACHE_REDIS_URL = &quot;&quot;

#: CACHE_DIR
#: Directory to store cache if CACHE_TYPE is filesystem, it will
CACHE_DIR = &quot;&quot;
</pre></div>


<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="kr">class</span> <span class="nx">Index</span><span class="p">(</span><span class="nx">Mocha</span><span class="p">)</span><span class="o">:</span>

    <span class="kd">@cache</span><span class="p">.</span><span class="nx">cached</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span>
    <span class="nx">def</span> <span class="nx">index</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">pass</span>
</pre></div>


<p>Extension: <a href="https://github.com/thadeusb/flask-cache">flask-cache</a></p>
<hr />
<h2 id="mail">mail</h2>
<p><strong>mail</strong> exposes an interface to send email via SMTP or AWS SES.</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">mail</span>
</pre></div>


<p><strong>Configuration</strong></p>
<div class="codehilite"><pre><span></span><span class="c1"># AWS SES</span>
<span class="c1"># To use AWS SES to send email</span>
<span class="c1">#:</span>
<span class="c1">#: - To use the default AWS credentials (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)</span>
<span class="c1">#: set MAIL_URI = &quot;ses://&quot;</span>
<span class="c1">#: * To use a different credential:</span>
<span class="c1">#: set MAIL_URI = &quot;ses://{access_key}:{secret_key}@{region}&quot;</span>
<span class="c1">#:</span>
<span class="c1">#: *** uncomment if you are using SMTP instead</span>
<span class="ss">MAIL_URI =</span> <span class="s2">&quot;ses://&quot;</span>

<span class="c1"># SMTP</span>
<span class="c1">#: If you are using SMTP, it will use Flask-Mail</span>
<span class="c1">#: The uri for the smtp connection. It will use Flask-Mail</span>
<span class="c1">#: format: smtp://USERNAME:PASSWORD@HOST:PORT</span>
<span class="c1">#: with sll -&gt; smtp+ssl://USERNAME:PASSWORD@HOST:PORT</span>
<span class="c1">#: with ssl and tls -&gt; smtp+ssl+tls://USERNAME:PASSWORD@HOST:PORT</span>
<span class="c1">#:</span>
<span class="c1">#: *** comment out if you are using SES instead</span>
<span class="c1"># MAIL_URI = &quot;smtp+ssl://{username}:{password}@{host}:{port}&quot;\</span>
<span class="c1">#    .format(username=&quot;&quot;, password=&quot;&quot;, host=&quot;smtp.gmail.com&quot;, port=465)</span>

<span class="c1">#: MAIL_SENDER - The sender of the email by default</span>
<span class="c1">#: For SES, this email must be authorized</span>
<span class="ss">MAIL_SENDER =</span> APPLICATION_ADMIN_EMAIL

<span class="c1">#: MAIL_REPLY_TO</span>
<span class="c1">#: The email to reply to by default</span>
<span class="ss">MAIL_REPLY_TO =</span> APPLICATION_ADMIN_EMAIL

<span class="c1">#: MAIL_TEMPLATE</span>
<span class="c1">#: a directory that contains the email template or a dict</span>
<span class="ss">MAIL_TEMPLATE =</span> os<span class="o">.</span>path<span class="o">.</span>join<span class="p">(</span>APPLICATION_DATA_DIR<span class="p">,</span> <span class="s2">&quot;mail-templates&quot;</span><span class="p">)</span>

<span class="c1">#: MAIL_TEMPLATE_CONTEXT</span>
<span class="c1">#: a dict of all context to pass to the email by default</span>
<span class="ss">MAIL_TEMPLATE_CONTEXT =</span> <span class="p">{</span>
    <span class="s2">&quot;site_name&quot;</span><span class="p">:</span> APPLICATION_NAME<span class="p">,</span>
    <span class="s2">&quot;site_url&quot;</span><span class="p">:</span> APPLICATION_URL
<span class="p">}</span>
</pre></div>


<p>As a convenience, you can use <code>send_email()</code> to send email. </p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">Mocha</span><span class="p">,</span> <span class="n">send_email</span>

<span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">Mocha</span><span class="p">):</span>

    <span class="nd">@post</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">send</span><span class="p">():</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="s2">&quot;email@email.com&quot;</span>
        <span class="n">sender</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Welcome&quot;</span>

        <span class="n">mail</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="n">recipient</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subet</span><span class="p">)</span>
</pre></div>


<p>Extension: <a href="https://github.com/mardix/ses-mailer">ses-mailer</a></p>
<p>Extension: <a href="https://github.com/mattupstate/flask-mail">flask-mail</a></p>
<hr />
<h2 id="recaptcha">recaptcha</h2>
<p><strong>ReCaptcha</strong> implements the Google recaptcha in your application. </p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">recaptcha</span>
</pre></div>


<p><strong>Configuration</strong></p>
<div class="codehilite"><pre><span></span>#: Flask-Recaptcha
#: Register your application at https://www.google.com/recaptcha/admin

#: RECAPTCHA_ENABLED
RECAPTCHA_ENABLED = True

#: RECAPTCHA_SITE_KEY
RECAPTCHA_SITE_KEY = &quot;&quot;

#: RECAPTCHA_SECRET_KEY
RECAPTCHA_SECRET_KEY = &quot;&quot;
</pre></div>


<p><strong>Jinja Code</strong></p>
<p>To include the recaptcha in your template add the code below</p>
<div class="codehilite"><pre><span></span><span class="cp">{{</span> <span class="nv">recaptcha</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>


<p><strong>Verify Code</strong></p>
<div class="codehilite"><pre><span></span><span class="kr">class</span> <span class="nx">Index</span><span class="p">(</span><span class="nx">Mocha</span><span class="p">)</span><span class="o">:</span>

    <span class="nx">def</span> <span class="nx">index</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">pass</span>

    <span class="kd">@post</span>
    <span class="nx">def</span> <span class="nx">send_data</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="k">if</span> <span class="nx">recaptcha</span><span class="p">.</span><span class="nx">verify</span><span class="p">()</span><span class="o">:</span>
            <span class="err">#</span> <span class="nx">SUCCESS</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="err">#</span> <span class="nx">FAILED</span>
</pre></div>


<p><strong>About</strong></p>
<p>Extension: <a href="https://github.com/mardix/flask-recaptcha">flask-recaptcha</a></p>
<p>To register your application go <a href="https://www.google.com/recaptcha/admin">https://www.google.com/recaptcha/admin</a></p>
<hr />
<h2 id="csrf">csrf</h2>
<p><strong>csrf</strong> prevents cross-site request forgery (CSRF) on your application</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">csrf</span>
</pre></div>


<p>Automatically all POST, UPDATE methods will require a CSRF token, unless explicitly exempt.</p>
<p>To exempt and endpoint, jus add the decorator <code>csrf.exempt</code></p>
<div class="codehilite"><pre><span></span><span class="kr">class</span> <span class="nx">Index</span><span class="p">(</span><span class="nx">Mocha</span><span class="p">)</span><span class="o">:</span>

    <span class="nx">def</span> <span class="nx">index</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">pass</span>

    <span class="kd">@post</span><span class="p">()</span>
    <span class="kd">@csrf</span><span class="p">.</span><span class="nx">exempt</span>
    <span class="nx">def</span> <span class="nx">exempted_post</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">pass</span>

    <span class="kd">@post</span><span class="p">()</span>
    <span class="nx">def</span> <span class="nx">save_data</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">pass</span>
</pre></div>


<p>In the example above, when posting to <code>/exempted-post/</code> it will not require the CSRF token,
however <code>/save-data/</code> requires it. </p>
<p><strong>About</strong></p>
<p>Extension: <a href="https://github.com/maxcountryman/flask-seasurf">flask-seasurf</a></p>
<p>SeaSurf is a Flask extension for preventing cross-site request forgery (CSRF).</p>
<p>CSRF vulnerabilities have been found in large and popular sites such as YouTube. 
These attacks are problematic because the mechanism they use is relatively easy to exploit. 
This extension attempts to aid you in securing your application from such attacks.</p>
<hr />
<h2 id="session">session</h2>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">session</span>
</pre></div>


<p>--</p>
<h2 id="storage">storage</h2>
<p>Allows you to to access, upload, download, save and delete files on cloud
storage providers such as: AWS S3, Google Storage, Microsoft Azure,
Rackspace Cloudfiles, and even Local file system</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">mocha</span> <span class="kn">import</span> <span class="n">storage</span>
</pre></div>


<h3 id="configuration">Configuration</h3>
<p>Edit the keys below in your config class file:</p>
<div class="codehilite"><pre><span></span>#: STORAGE_PROVIDER:
# The provider to use. By default it&#39;s &#39;LOCAL&#39;.
# You can use:
# LOCAL, S3, GOOGLE_STORAGE, AZURE_BLOBS, CLOUDFILES
STORAGE_PROVIDER = &quot;LOCAL&quot;

#: STORAGE_KEY
# The storage key. Leave it blank if PROVIDER is LOCAL
STORAGE_KEY = AWS_ACCESS_KEY_ID

#: STORAGE_SECRET
#: The storage secret key. Leave it blank if PROVIDER is LOCAL
STORAGE_SECRET = AWS_SECRET_ACCESS_KEY

#: STORAGE_REGION_NAME
#: The region for the storage. Leave it blank if PROVIDER is LOCAL
STORAGE_REGION_NAME = AWS_REGION_NAME

#: STORAGE_CONTAINER
#: The Bucket name (for S3, Google storage, Azure, cloudfile)
#: or the directory name (LOCAL) to access
STORAGE_CONTAINER = os.path.join(APPLICATION_DATA_DIR, &quot;uploads&quot;)

#: STORAGE_SERVER
#: Bool, to serve local file
STORAGE_SERVER = True

#: STORAGE_SERVER_URL
#: The url suffix for local storage
STORAGE_SERVER_URL = &quot;files&quot;
</pre></div>


<h3 id="storageget">storage.get</h3>
<p>Allows you to get a file from the storage</p>
<div class="codehilite"><pre><span></span>my_file = storage.get(&quot;myfile.jpg&quot;)

my_file.name  # return The file name

my_file.size  # returns file size
</pre></div>


<h3 id="storageupload">storage.upload</h3>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../assets/" title="Assets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Assets
              </span>
            </div>
          </a>
        
        
          <a href="../utils/" title="Utils" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Utils
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2017++ Mardix
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>